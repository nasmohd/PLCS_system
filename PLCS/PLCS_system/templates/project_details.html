<!DOCTYPE html>
<html>
<head>
  {% load static %}
  {% load custom_filters %}

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> PLC System </title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="{% static 'bower_components/bootstrap/dist/css/bootstrap.min.css' %}">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{% static 'bower_components/font-awesome/css/font-awesome.min.css' %}">
  <!-- Ionicons -->
  <link rel="stylesheet" href="{% static 'bower_components/Ionicons/css/ionicons.min.css' %}">
  <!-- Theme style -->
  <link rel="stylesheet" href="{% static 'dist/css/AdminLTE.min.css' %}">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="{% static 'dist/css/skins/_all-skins.min.css' %}">
  <!-- Morris chart -->
  <link rel="stylesheet" href="{% static 'bower_components/morris.js/morris.css' %}">
  <!-- jvectormap -->
  <link rel="stylesheet" href="{% static 'bower_components/jvectormap/jquery-jvectormap.css' %}">
  <!-- Date Picker -->
  <link rel="stylesheet" href="{% static 'bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css' %}">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="{% static 'bower_components/bootstrap-daterangepicker/daterangepicker.css' %}">
  <!-- bootstrap wysihtml5 - text editor -->
  <link rel="stylesheet" href="{% static 'plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css' %}">

  <link rel="stylesheet" href="{% static 'bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css' %}">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- Google Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<body class="hold-transition skin-blue sidebar-mini">
<div class="wrapper">

  {% include 'header.html' %}

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Projects
        <small>Control panel</small>
      </h1>
      <!-- <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Projects</li>
      </ol> -->
    </section>

    <!-- Main content -->
    <section class="content">
      <!-- Small boxes (Stat box) -->
      <div class="row">
        <!-- RECOMMEND BASED ON USER INTERESTS -->
        <div class="col-md-8 col-8">
          <div class="row">

            <!-- <div class="col-md-12 col-12" style="margin-bottom: 3rem;">
              <form action="#" method="get" class="">
                <div class="input-group">
                  <input type="text" name="q" class="form-control" placeholder="Search...">
                  <span class="input-group-btn">
                    <button type="submit" name="search" id="search-btn" class="btn btn-flat btn-info"><i class="fa fa-search"></i>
                    </button>
                  </span>
                </div>
              </form>
            </div> -->

            
            <!-- ./col -->

            <div class="col-md-12 col-12" style="margin-top: 0rem;">
              <div class="box box-solid">
                <div class="box-header with-border">
                  <i class="fa fa-file"></i>

                  <h3 class="box-title"> PLC Programming </h3>

                  <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-toggle="dropdown">
                      <i class="fa fa-ellipsis-v"></i>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                      {% if i.user_project.id == current_user %}
                        <li><a href="#">Edit</a></li>
                        <li><a href="#">Delete</a></li>
                      {% endif %}
                    </ul>
                  </div>

                  <!-- <i class="fa fa-file "></i> -->
                </div>


                <!-- /.box-header -->
                <div class="box-body">
                  <div class="col-md-7 col-8">
                    <!-- {{ i.project_images }} -->
                    <!-- <i class="fa fa-file-text-o"></i> -->
                    
                    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel" style="width: inherit; height: inherit;">
                      <ol class="carousel-indicators">
                        <li data-target="#carousel-example-generic" data-slide-to="0" class=""></li>
                        <li data-target="#carousel-example-generic" data-slide-to="1" class="active"></li>
                        <li data-target="#carousel-example-generic" data-slide-to="2" class=""></li>
                      </ol>
                      <div class="carousel-inner">
                        {% for im in get_project_details.project_images %}
                          {% if im != 'x.pdf' %}
                            {% if forloop.counter == 1 %}
                            <div class="item active">
                              <img src="{% static 'project_imgs/'|add:im %}" alt="Image" style="width: inherit; height: inherit;">
                            </div>

                            {% else %}
                              <div class="item">
                                <img src="{% static 'project_imgs/'|add:im %}" alt="Image" style="width: inherit; height: inherit;">
                              </div>
                            {% endif %}
                          {% endif %}
                        
                        {% endfor %}
                      </div>

                      <a class="left carousel-control" href="#carousel-example-generic" data-slide="prev">
                        <span class="fa fa-angle-left"></span>
                      </a>
                      <a class="right carousel-control" href="#carousel-example-generic" data-slide="next">
                        <span class="fa fa-angle-right"></span>
                      </a>
                    </div>
                    
                    <!-- {{ get_project_details.project_images.2 }} -->

                    <!-- <img src="{% static 'project_imgs/PLCS6#img1.jpg' %}" style="height: 120%; width:100%; background-color: red;"/> -->
                    <!-- <img src="{% static 'profile_imgs/{{ i.project_images.0 }}' %}"/> -->
                    
                  </div>

                  <div class="col-md-5 col-4">
                    <div class="col-md-12 col-12">
                      <dt>Skills required</dt>
                      <dd>
                        {% for j in get_project_details.project_skills %}
                          <span class="badge bg-red" id="skill{{ i.id }}_{{ forloop.counter }}">{{ j }}</span>
                        {% endfor %}

                      </dd>
                    </div>

                    <div class="project_view_style2" style="margin-top: 9rem;">
                      <div class="col-md-6 col-6">
                        <dt>Budget</dt>
                        <dd id="project_budget">{{ get_project_details.project_budget }} TZS</dd>
                      </div>

                      <script>
                        document.addEventListener('DOMContentLoaded', function() {
                          var budgetElement = document.getElementById('project_budget');
                          var budgetValue = budgetElement.innerText;
                          var formattedBudget = addCommasToNumber(budgetValue);
                          budgetElement.innerText = formattedBudget;
                        });

                        function addCommasToNumber(value) {
                          return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                        }


                        //Add color to skills labels
                        document.addEventListener('DOMContentLoaded', function() {
                          var skillCount = {{ get_project_details.project_skills|length }};
                          
                          for (var i = 1; i <= skillCount; i++) {
                            var skillElement = document.getElementById('skill{{ i.id }}_' + i);
                            var randomClass = getRandomClass();
                            skillElement.classList.add(randomClass);
                          }
                        });
                        
                        function getRandomClass() {
                          var classes = ['bg-green', 'bg-red', 'bg-yellow', 'bg-aqua']; // Add more classes if needed
                          var randomIndex = Math.floor(Math.random() * classes.length);
                          return classes[randomIndex];
                        }
                      </script>
                      
                      <div class="col-md-6 col-6">
                        <dt>Collaborators</dt>
                        <dd> {{ get_project_details.project_collaborators }} </dd>
                      </div>

                      <div class="col-md-12 col-12 project_view_style2">
                        <dt>Deadline</dt>
                        <dd>{{ get_project_details.project_deadline }} </dd>
                      </div>
                    </div>

                    
                    <script>
                      document.addEventListener('DOMContentLoaded', function() {
                        var skillCount = {{ i.project_skills|length }};
                        
                        for (var i = 1; i <= skillCount; i++) {
                          var skillElement = document.getElementById('skill{{ i.id }}_' + i);
                          var randomClass = getRandomClass();
                          skillElement.classList.add(randomClass);
                        }
                      });
                      
                      function getRandomClass() {
                        var classes = ['bg-green', 'bg-red', 'bg-yellow', 'bg-aqua']; // Add more classes if needed
                        var randomIndex = Math.floor(Math.random() * classes.length);
                        return classes[randomIndex];
                      }
                    </script>


                    <script>
                      document.addEventListener('DOMContentLoaded', function() {
                        var applyButton = document.getElementById('applyButton{{ i.id }}');
                        
                        applyButton.addEventListener('click', function() {
                            this.classList.toggle('btn-success');
                            this.classList.toggle('btn-info');
                            var icon = this.querySelector('i');
                            if (icon) {
                              this.removeChild(icon);
                              this.innerHTML = 'Apply Now';
                            } else {
                              var newIcon = document.createElement('i');
                              newIcon.classList.add('fa', 'fa-fw', 'fa-check');
                              newIcon.style.color = 'white';
                              this.innerHTML = '';
                              this.appendChild(newIcon);
                              this.innerHTML += ' Applied';
                            }
                        });
                      });
                    </script>

                  </div>


                  <div class="col-md-12 col-12">

                    <div class="col-md-12 project_view_style2">
                      <dt>Description</dt>
                      <dd style="justify-content: center;">
                        {{ get_project_details.project_description }}
                      </dd>
                    </div>
                    
                    
                    <div class="col-md-12" style="margin-top: 2rem;">
                      {% if i.user_project.id != current_user %}
                        <a class="btn btn-primary btn-sm" id="applyButton{{ i.id }}"> Contact this user </a>
                        <a class="btn btn-info btn-sm" id="applyButton{{ i.id }}"> Apply Now </a>
                      {% endif %}

                      <div class="pull-right">
                        <button class="btn btn-sm btn-link likeButton" data-project-id="{{ i.id }}" id="like{{ i.id }}" style="text-decoration: none;">
                          <i class="fa fa-fw fa-thumbs-o-up"></i> Like
                        </button>
                        <button class="btn btn-sm btn-link" data-project-id="{{ i.id }}">
                          <i class="fa fa-fw fa-thumbs-o-down"></i> Dislike
                        </button>
                      </div>

                      <script type="text/javascript">
                        //For Like Button

                        document.addEventListener('DOMContentLoaded', function() {
                          var likeButton = document.getElementById('like{{ i.id }}');
                          var icon = likeButton.querySelector('i');
                          var projectId = likeButton.getAttribute('data-project-id');
                          
                          likeButton.addEventListener('click', function() {
                            if (icon.classList.contains('fa-thumbs-up')) {
                              icon.classList.remove('fa-thumbs-up');
                              icon.classList.add('fa-thumbs-o-up');
                              updateLikeStatus(projectId, false);
                              // Make an AJAX request to update the like status for the project with the given projectId
                              // Example:
                              // updateLikeStatus(projectId, false);
                            } else {
                              icon.classList.remove('fa-thumbs-o-up');
                              icon.classList.add('fa-thumbs-up');
                              updateLikeStatus(projectId, true);
                              // Make an AJAX request to update the like status for the project with the given projectId
                              // Example:
                              // updateLikeStatus(projectId, true);
                            }
                          });

                          function getCookie(name) {
                            var cookieValue = null;
                            if (document.cookie && document.cookie !== '') {
                              var cookies = document.cookie.split(';');
                              for (var i = 0; i < cookies.length; i++) {
                                var cookie = cookies[i].trim();
                                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                  break;
                                }
                              }
                            }
                            return cookieValue;
                          }


                          function updateLikeStatus(projectId, isLiked) {
                            var csrftoken = getCookie('csrftoken');

                            var xhr = new XMLHttpRequest();
                            xhr.open('POST', '/like_project/');
                            xhr.setRequestHeader('Content-Type', 'application/json');
                            xhr.setRequestHeader('X-CSRFToken', csrftoken);
                            xhr.onload = function() {
                              if (xhr.status === 200) {
                                // Handle the success response
                                console.log('Request successful!');
                              } else {
                                // Handle the error response
                                console.log('Request failed!');
                              }
                            };
                            var data = JSON.stringify({ projectId: projectId, isLiked: isLiked });
                            xhr.send(data);
                          }


                        });

                        //For Dislike Button
                      </script>


                      {% if i.user_project.id != current_user %}
                        <a class="btn btn-danger btn-sm">Delete</a> {{ i.user_project.id }}
                      {% endif %}
                    </div>
                  </div>

                  <div class="col-md-12 col-12">
                    <div class="nav-tabs-custom">
                      <ul class="nav nav-tabs">
                        <li class="active"><a href="#tab_5" data-toggle="tab" aria-expanded="true">Project Images </a></li>
                        <li ><a href="#tab_6" data-toggle="tab" aria-expanded="false"> Project Files </a></li>

                      </ul>

                      <div class="tab-content">
                        <div class="tab-pane active" id="tab_5">
                          <p> Images Here </p>
                          <div style="display: flex;">
                          {% for im in get_project_details.project_images %}
                            {% if im != 'x.pdf' %}
                              <div class="item active" style="height: 100px; width: 100px; margin-right: 10px;">
                                <img src="{% static 'project_imgs/'|add:im %}" alt="Image" style="width: inherit; height: inherit;">
                              </div>
                            {% endif %}
                          {% endfor %}
                          </div>
                        </div>


                        <!-- /.tab-pane -->
                        <div class="tab-pane" id="tab_6">
                          {% for im in get_project_details.project_files %}
                            {% if im != 'x.jpg' %}
                              <a href="#"> {{ im }} </a>
                            {% endif %}
                          {% endfor %}
                        </div>

                      </div>
                      <!-- /.tab-content -->
                    </div>

                  </div>

                  <style type="text/css">
                    @media screen and (min-width: 993px){
                      .project_view_style1{
                        margin-top:12rem;
                      }

                      .project_view_style2{
                        margin-top:2rem;
                      }

                      .project_view_style3{
                        margin-top: 8rem;
                      }
                    }

                    @media screen and (max-width: 993px){
                      .project_view_style1{
                        margin-top:2rem;
                      }

                      .project_view_style2{
                        margin-top:2rem;
                      }
                    }
                    
                  </style>

                </div>
                <!-- /.box-body -->
              </div>
              <!-- /.box -->
            </div>

          </div>

        </div>

        <!-- RECOMMEND BASED ON USER ACTIVITY -->
        <div class="col-md-4 col-4">
          <div class="row">

            <div class="col-md-12" style="margin-top: 0rem;">
              <div class="box box-solid">
                <div class="box-header with-border">
                  <i class="fa fa-file"></i>

                  <h4 class="box-title"> Recommended Projects </h4>

                  <!-- <i class="fa fa-file "></i> -->
                </div>


                <!-- /.box-header -->
                <div class="box-body">
                  <div class="col-md-12">
                    <dt>Web Development</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                  <div class="col-md-12 mt">
                    <dt>Mobile App Development</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                  <div class="col-md-12 mt">
                    <dt>UI/UX Design</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                  <div class="col-md-12 mt">
                    <dt>UI/UX Design</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                  <div class="col-md-12 mt">
                    <dt>Web Development</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                </div>
                <!-- /.box-body -->
              </div>
              <!-- /.box -->
            </div>

            <div class="col-md-12" style="margin-top: 0rem;">
              <div class="box box-solid">
                <div class="box-header with-border">
                  <div class="box-title" style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <i class="fa fa-file"></i>
                    <h4 style="margin-top: -0.5rem;"> Recommended Projects <br/> based on your Activity </h4>
                  </div>

                  <!-- <i class="fa fa-file "></i> -->
                </div>


                <!-- /.box-header -->
                <div class="box-body">
                  <div class="col-md-12">
                    <dt>Web Development</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                  <div class="col-md-12 mt">
                    <dt>Mobile App Development</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                  <div class="col-md-12 mt">
                    <dt>UI/UX Design</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                  <div class="col-md-12 mt">
                    <dt>Web Development</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                  <div class="col-md-12 mt">
                    <dt>Mobile App Development</dt>
                    <dd>A description list is perfect for defining terms. <a href="#"> Read more </a> </dd>
                  </div>

                </div>
                <!-- /.box-body -->
              </div>
              <!-- /.box -->
            </div>
          </div>
        </div>

      </div>

      <style type="text/css">
        .mt {
          margin-top: 2rem;
        }
      </style>


    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

    
  <!-- /.content-wrapper -->
  {% include 'footer.html' %}

  
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
       immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- jQuery 3 -->
<script src="{% static 'bower_components/jquery/dist/jquery.min.js' %}"></script>
<!-- jQuery UI 1.11.4 -->
<script src="{% static 'bower_components/jquery-ui/jquery-ui.min.js' %}"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
  $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Bootstrap 3.3.7 -->
<script src="{% static 'bower_components/bootstrap/dist/js/bootstrap.min.js' %}"></script>
<!-- Morris.js charts -->
<script src="{% static 'bower_components/raphael/raphael.min.js' %}"></script>
<script src="{% static 'bower_components/morris.js/morris.min.js' %}"></script>
<!-- Sparkline -->
<script src="{% static 'bower_components/jquery-sparkline/dist/jquery.sparkline.min.js' %}"></script>
<!-- jvectormap -->
<script src="{% static 'plugins/jvectormap/jquery-jvectormap-1.2.2.min.js' %}"></script>
<script src="{% static 'plugins/jvectormap/jquery-jvectormap-world-mill-en.js' %}"></script>
<!-- jQuery Knob Chart -->
<script src="{% static 'bower_components/jquery-knob/dist/jquery.knob.min.js' %}"></script>
<!-- daterangepicker -->
<script src="{% static 'bower_components/moment/min/moment.min.js' %}"></script>
<script src="{% static 'bower_components/bootstrap-daterangepicker/daterangepicker.js' %}"></script>
<!-- datepicker -->
<script src="{% static 'bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js' %}"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="{% static 'plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js' %}"></script>
<!-- Slimscroll -->
<script src="{% static 'bower_components/jquery-slimscroll/jquery.slimscroll.min.js' %}"></script>
<!-- FastClick -->
<script src="{% static 'bower_components/fastclick/lib/fastclick.js' %}"></script>
<!-- AdminLTE App -->
<script src="{% static 'dist/js/adminlte.min.js' %}"></script>
<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
<script src="{% static 'dist/js/pages/dashboard.js' %}"></script>
<!-- AdminLTE for demo purposes -->
<script src="{% static 'dist/js/demo.js' %}"></script>

<script src="{% static 'bower_components/datatables.net/js/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js' %}"></script>
<!-- SlimScroll -->
<script src="{% static 'bower_components/jquery-slimscroll/jquery.slimscroll.min.js' %}"></script>
<!-- FastClick -->
<script src="{% static 'bower_components/fastclick/lib/fastclick.js' %}"></script>

<script>
  $(function () {
    $('#example1').DataTable()
    $('#example2').DataTable({
      'paging'      : true,
      'lengthChange': false,
      'searching'   : false,
      'ordering'    : true,
      'info'        : true,
      'autoWidth'   : false
    })
  })
</script>
</body>
</html>


  